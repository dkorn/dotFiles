# Support for 256 colors
set -g default-terminal "xterm-256color"
set-window-option -g xterm-keys on
#set-option -ga terminal-overrides ",xterm-256color:Tc"
#set -g xterm-keys on

# Copy-paste integration
set-option -g default-command "reattach-to-user-namespace -l zsh"

# vi-style controls for copy mode
set-window-option -g mode-keys vi

## bind vi key-mapping
#set -g status-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# Window index base 1
set -g base-index 1
# Pane index (for tmuxinator)
set-window-option -g pane-base-index 1
# large history
set-option -g history-limit 100000
# highlight status bar on activity
setw -g monitor-activity on
set -g visual-activity off
#  set -g visual-bell on
# automatically set window title
set -g automatic-rename off
set -g allow-rename off
set-option -g display-time 5000
# allow terminal scrolling
# set-option -g terminal-overrides 'xterm*:smcup@:rmcup@'

set-option -g renumber-windows on #tmux 1.8

# rename window according to pane base path
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{b:pane_current_path}'

# keybindings for resize panes
bind-key -r j resize-pane -D 5
bind-key -r k resize-pane -U 5
bind-key -r h resize-pane -L 5
bind-key -r l resize-pane -R 5

# VI bindings in remote tmux
bind F3 send-keys 'tmux set -g mode-keys vi;tmux set -g status-keys vi' Enter

### DESIGN CHANGES
# Panes {
set -g pane-border-fg black
set -g pane-active-border-fg colour32
# }

## Status bar design {
set -g status-bg colour32
set -g status-fg colour238
# }

# Status bar {
set-option -g status-interval 1
set -g status-left ''
setw -g window-status-attr none
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

setw -g window-status-current-fg colour32
setw -g window-status-current-bg colour238
setw -g window-status-current-attr bold
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour32]#F '

setw -g window-status-activity-attr bold
# }

###

set -g @tpm_plugins '          \
  tmux-plugins/tpm \
  tmux-plugins/tmux-pain-control \
  tmux-plugins/tmux-prefix-highlight \
  tmux-plugins/tmux-fpp \
  tmux-plugins/tmux-battery'

set -g @prefix_highlight_show_copy_mode 'on'
set -g status-right '#[fg=colour11,bg=colour32,bold] #{prefix_highlight} #{battery_status_bg} #{battery_status_fg} #{battery_icon} #{battery_percentage} #(docker-status-check.sh) #(apple-language-to-emoji)  | %a %h-%d %H:%M'

run-shell '~/.tmux/plugins/tpm/tpm'
